{{ define "main"}}

<!-- 轮播图部分 -->
<div class="relative overflow-hidden rounded-2xl shadow-lg carousel-wrapper">
  <div id="carousel" class="carousel flex transition-transform duration-500 ease-in-out">
    <img class="carousel-img" src="https://i.postimg.cc/nHBmRW5B/79392e224812ea8e198ac0aafcae3299.jpg?dl=1" />
    <img class="carousel-img" src="https://i.postimg.cc/0kCwxw9N/20250416102628601.png?dl=1" />
    <img class="carousel-img" src="https://i.postimg.cc/BJ8HDbBh/fa2623135b9513ac365ff8855aa06dfe.jpg?dl=1" />
    <img class="carousel-img" src="https://i.postimg.cc/VmkjfDrP/edbec8b7b6c76ebf4692ff57f0af8c07.jpg?dl=1" />
    <img class="carousel-img" src="https://i.postimg.cc/R9R7xj0T/4a35acd2a486b7a2fe929e6279addd3b.jpg?dl=1" />
    <img class="carousel-img" src="https://i.postimg.cc/hggLwSKj/f711f81e9bd8fd227d027f634e4b773c.jpg?dl=1" />
  </div>
  <button onclick="changeSlide(-1)" class="carousel-btn carousel-btn-left">❮</button>
  <button onclick="changeSlide(1)" class="carousel-btn carousel-btn-right">❯</button>
</div>

<!-- JavaScript 部分 -->
<script>
  let currentIndex = 0;
  const carousel = document.getElementById("carousel");
  const slides = carousel.querySelectorAll(".carousel-img");
  const total = slides.length;

  function updateSlide() {
    carousel.style.transform = `translateX(-${currentIndex * 100}%)`;
  }

  function changeSlide(n) {
    currentIndex = (currentIndex + n + total) % total;
    updateSlide();
  }

  setInterval(() => changeSlide(1), 6000);

  document.addEventListener('DOMContentLoaded', function () {
    const toggle = document.querySelector('.menu-toggle');
    const menu = document.querySelector('.nav.navbar-nav');

    if (toggle && menu) {
      toggle.addEventListener('click', function () {
        menu.classList.toggle('active');
      });
    }
  });
</script>

<!-- 样式部分 -->
<style>
  .carousel-wrapper {
    width: 100%;
    max-width: 100%;
    height: 500px;
    overflow: hidden;
    position: relative;
    margin: auto;
  }

  .carousel {
    display: flex;
    width: 100%;
    height: 100%;
    transition: transform 0.5s ease-in-out;
  }

  .carousel-img {
    flex: 0 0 100%;
    width: 100%;
    height: 100%;
    object-fit: contain;
    border: 2px solid #ccc;
    padding: 0 2rem;
    box-sizing: border-box;
  }

  .carousel-btn {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    z-index: 10;
    background-color: rgba(0, 0, 0, 0.5);
    color: white;
    border: none;
    padding: 0.75rem 1rem;
    border-radius: 9999px;
    cursor: pointer;
    font-size: 1.5rem;
  }

  .carousel-btn-left {
    left: 10px;
  }

  .carousel-btn-right {
    right: 10px;
  }

  /* 菜单样式 */
  .nav.navbar-nav {
    display: none;
  }

  .nav.navbar-nav.active {
    display: block;
  }
</style>

{{ $paginator := .Paginate (where site.RegularPages "Type" "posts") }}

{{ if site.Params.zenMode }}
<div class="dream-zen-posts max-w-[65ch] mt-8 mx-auto px-4 space-y-8">
{{ range $paginator.Pages }}
  {{ .Render "zen-summary" }}
{{ end }}
</div>
{{ else }}
<div class="dream-grid opacity-0">
  {{ range $paginator.Pages }}
    <div class="w-full md:w-1/2 lg:w-1/3 xl:w-1/4 p-4 dream-column">
      {{ .Render "summary" }}
    </div>
  {{ end }}
</div>
{{ end }}

{{ if gt $paginator.TotalPages 1 }}
<div class="flex justify-center mt-8">
  {{ partial "paginator.html" (dict "paginator" $paginator) }}
</div>
{{ end }}

{{ end }}

{{ define "js" }}

{{ if site.Params.Experimental.jsDate }}
{{ partial "luxon.html" . }}
{{ end }}

<script src="{{ "/js/menu-toggle.js" | relURL }}"></script>

{{ end }}